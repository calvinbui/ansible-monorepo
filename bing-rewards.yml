---

- hosts: homelab

  vars:
    application: bing-rewards

    bing_rewards_username: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      39343532653764666563323437373631353636666266343532343061656230336638383165393537
      3738386164386161643238653162303135346463326331310a363261656335356233653235613563
      37366361323431333966373238343534626439643839386337636663373737643439363638333663
      6536363862303531340a386163343639613730353935396339393030626561366264313835396561
      33633837336531376138323561386533333332363339393832613563653838383161

    bing_rewards_password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      32376564366666626336373036353436376165356462636137393232626235623239383964616361
      6530326165663365313664386332636562326163306535380a386264326433663030616364343766
      37353364336266353035623134346437313138666136313939373566353533383634663765386263
      6364633362366234340a366339626230353539363763316666373936343230316130343963393738
      32316461353834376239333835306439366235633537353231616439666535633562653538653364
      3631383735396631383564306332363431363166353139643833

    docker_network: "{{ networks.pub }}"

  tasks:
    - name: Create container
      ansible.builtin.include_role:
        name: docker_container
      vars:
        image: killerherts/bing-rewards:DockerFix
        command:
          - python
          - setup.py
          - -e
          - "{{ bing_rewards_username }}"
          - -p
          - "{{ bing_rewards_password }}"
        volumes:
          - "{{ config_directory }}:/config"
