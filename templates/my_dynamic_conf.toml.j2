[http.routers.api]
    rule = "Host(`traefik.{{ common_tld }}`)"
    entryPoints = ["web-secure"]
    service = "api@internal"
    middlewares = ["myAuth"]
    [http.routers.api.tls]
        certResolver = "letsencrypt"
        options = "myTLSOptions"
            [[http.routers.api.tls.domains]]
                main = "traefik.{{ common_tld }}"

# htpasswd -nb user password
[http.middlewares]
    [http.middlewares.redirect.redirectScheme]
        scheme = "https"
    [http.middlewares.myAuth.basicAuth]
        users = ["calvin:$apr1$WD.JP/Cq$Tl/cV9ZDn0.Y/n8wWbIIF1"]

[tls.options]
    [tls.options.myTLSOptions]
        minVersion = "VersionTLS13"
        cipherSuites = [
            "TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256",
            "TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384",
            "TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305",
            "TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305",
            "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256",
            "TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256",
        ]
