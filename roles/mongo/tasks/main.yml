---

- name: Create MongoDB directory
  file:
    path: "{{ mongo_directory }}"
    state: directory

- name: Set Docker container parameters
  set_fact:
    mongo_container_parameters:
      name: "{{ mongo_name }}"
      image: "{{ mongo_image }}"
      state: started
      published_ports: "{{ mongo_ports | default(omit) }}"
      env: "{{ mongo_environment_variables | default(omit) }}"
      volumes:
        - "{{ mongo_directory }}:/data/db"

- name: Create MongoDB container
  docker_container: "{{ mongo_container_parameters | combine(mongo_docker_additional_options) }}"
  register: mongo_container
