{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",

  dependencyDashboard: true,

  ansible: {
    fileMatch: ["^.*\\.ya?ml$"],
  },

  python: {
    enabled: false,
  },

  timezone: "Australia/Sydney",

  schedule: [
    "after 5pm and before 11:59pm every weekday",
    "after 9am and before 11:59pm every weekend",
  ],

  reviewers: ["calvinbui"],

  commitMessagePrefix: "{{depName}}:",
  commitMessageAction: "update",
  commitMessageTopic: "version",
  commitMessageExtra: "to {{#if isMajor}}{{{prettyNewMajor}}}{{else}}{{{prettyNewVersion}}}{{/if}}",

  /*
    Renovate will evaluate all packageRules and not stop once it gets a first match
    You should order your packageRules in order of importance so that later rules can override settings from earlier rules if needed.
  */
  packageRules: [
    /* Ignore latest and localhost tags */
    {
      matchDatasources: ["docker"],
      matchCurrentVersion: "/localhost|latest/",
      enabled: false,
    },
    /*
      override Docker datasource defaults
      https://docs.renovatebot.com/modules/datasource/#docker-datasource
    */
    {
      matchDatasources: ["docker"],
      commitMessageTopic: "version",
      digest: {
        commitMessageTopic: "digest",
        group: {
          commitMessageTopic: "digest",
        },
      },
      pin: {
        group: {
          commitMessageTopic: "version",
        },
      },
      group: {
        commitMessageTopic: "version",
      },
    },
    /* Plex */
    {
      matchPackagePatterns: [".*\\/pms-docker"],
      versioning: "loose",
      prBodyNotes: "[Release Notes](https://forums.plex.tv/t/plex-media-server/30447)",
    },
    /* Umami */
    {
      matchPackagePatterns: [".*\\/umami"],
      versioning: "regex:^postgresql-v(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+)$",
    },
    /* Minio */
    {
      matchPackagePatterns: [".*\\/minio"],
      versioning: "regex:^RELEASE\\.(?<major>\\d+)-(?<minor>\\d+)-(?<patch>\\d+)T(?<build>.*)Z$",
      customChangelogUrl: "https://github.com/minio/minio",
    },
    /* Minio MC */
    {
      matchPackagePatterns: [".*\\/mc"],
      versioning: "regex:^RELEASE\\.(?<major>\\d+)-(?<minor>\\d+)-(?<patch>\\d+)T(?<build>.*)Z$",
      customChangelogUrl: "https://github.com/minio/mc",
    },
    /* Minio Console */
    {
      matchPackagePatterns: ["minio\\/console"],
      customChangelogUrl: "https://github.com/minio/console",
    },
    /* NZBGet */
    // automerge patch version which linuxserver.io puts as the date of the build
    {
      matchPackagePatterns: [".*\\/nzbget$"],
      matchUpdateTypes: ["patch"],
      automerge: true,
      ignoreTests: true,
    },
    /* Bazarr */
    {
      matchPackagePatterns: [".*\\/bazarr"],
      customChangelogUrl: "https://github.com/morpheus65535/bazarr",
    },
    /* VictoriaMetrics */
    {
      groupName: "VictoriaMetrics",
      matchPackagePatterns: [
        ".*\\/vmalert",
        ".*\\/victoria-metrics"
      ],
      customChangelogUrl: "https://github.com/VictoriaMetrics/VictoriaMetrics",
    },
    /* Homer */
    {
      matchPackagePatterns: [".*\\/homer"],
      customChangelogUrl: "https://github.com/bastienwirtz/homer",
    },
    /* Prowlarr */
    {
      matchPackagePatterns: [".*\\/prowlarr"],
      versioning: "regex:^develop-version-(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+)\\.(?<build>\\d+)$",
      customChangelogUrl: "https://github.com/Prowlarr/Prowlarr",
      prBodyNotes: "[Releases](https://github.com/Prowlarr/Prowlarr/releases)",
    },
    /* Renovate */
    {
      matchPackagePatterns: [".*\\/renovate"],
      customChangelogUrl: "https://github.com/renovatebot/renovate",
      matchUpdateTypes: ["patch"],
      automerge: true,
      ignoreTests: true,
    },
    /* Authelia */
    {
      matchPackagePatterns: [".*\\/authelia"],
      customChangelogUrl: "https://github.com/authelia/authelia",
    },
    /* qBittorrent */
    {
      matchPackagePatterns: [".*\\/qbittorrent"],
      customChangelogUrl: "https://github.com/qbittorrent/qBittorrent",
    },
    /* Portainer */
    {
      matchPackagePatterns: [".*\\/portainer-[c|e]e"],
      customChangelogUrl: "https://github.com/portainer/portainer",
    },
    /* Outline */
    {
      matchPackagePatterns: ["outlinewiki\\/outline"],
      customChangelogUrl: "https://github.com/outline/outline",
    },
    /* Tautulli */
    {
      matchPackagePatterns: [".*\\/tautulli"],
      customChangelogUrl: "https://github.com/Tautulli/Tautulli",
    },
    /* Overseerr */
    {
      matchPackagePatterns: ["sctx\\/overseerr"],
      customChangelogUrl: "https://github.com/sct/overseerr",
    },
    /* VS Code Server */
    {
      matchPackagePatterns: [".*\\/code-server"],
      customChangelogUrl: "https://github.com/coder/code-server",
    },
    /* LibreTranslate */
    {
      matchPackagePatterns: [".*\\/libretranslate"],
      customChangelogUrl: "https://github.com/LibreTranslate/LibreTranslate",
    },
    /* Nextcloud */
    {
      matchPackagePatterns: ["nextcloud"],
      customChangelogUrl: "https://github.com/nextcloud/server",
      prBodyNotes: "[Changelog](https://nextcloud.com/changelog/)",
    },
    /* Chadburn */
    {
      matchPackagePatterns: [".*\\/chadburn"],
      customChangelogUrl: "https://github.com/PremoWeb/Chadburn",
    },
    /* Grafana */
    {
      matchPackagePatterns: [".*\\/grafana"],
      customChangelogUrl: "https://github.com/grafana/grafana",
    },
    /* Mattermost */
    {
      matchPackagePatterns: [".*\\/mattermost-(team|enterprise)-edition"],
      customChangelogUrl: "https://github.com/mattermost/mattermost-server",
    },
    /* OnlyOffice */
    {
      matchPackagePatterns: ["onlyoffice\\/documentserver"],
      customChangelogUrl: "https://github.com/ONLYOFFICE/DocumentServer",
    },
    /* eufy-security-ws */
    {
      matchPackagePatterns: ["bropat\\/eufy-security-ws"],
      customChangelogUrl: "https://github.com/bropat/eufy-security-ws",
    },
    /* eufy rtsp */
    {
      matchPackagePatterns: ["aler9\\/rtsp-simple-server"],
      customChangelogUrl: "https://github.com/aler9/rtsp-simple-server",
    },
    /* changedetection.io */
    {
      matchPackagePatterns: [".*\\/changedetection.io"],
      versioning: "regex:^(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+)\\.?(?<build>\\d+)?$",
      customChangelogUrl: "https://github.com/dgtlmoon/changedetection.io",
    },
    /* watchtower */
    {
      matchPackagePatterns: ["containrrr\\/watchtower"],
      customChangelogUrl: "https://github.com/containrrr/watchtower",
    },
    /* cadvisor */
    {
      matchPackagePatterns: [".*\\/cadvisor"],
      customChangelogUrl: "https://github.com/google/cadvisor",
    },
    /* psitransfer */
    {
      matchPackagePatterns: ["psitrax\\/psitransfer"],
      customChangelogUrl: "https://github.com/psi-4ward/psitransfer",
    },
    /* ldap-user-manager */
    {
      matchPackagePatterns: ["wheelybird\\/ldap-user-manager"],
      customChangelogUrl: "https://github.com/wheelybird/ldap-user-manager",
    },
    /* node_exporter */
    {
      matchPackagePatterns: [".*\\/node(-|_)exporter"],
      customChangelogUrl: "https://github.com/prometheus/node_exporter",
    },
    /* blackbox_exporter */
    {
      matchPackagePatterns: [".*\\/blackbox(-|_)exporter"],
      customChangelogUrl: "https://github.com/prometheus/blackbox_exporter",
    },
    /* privatebin */
    {
      matchPackagePatterns: ["privatebin\\/.*"],
      customChangelogUrl: "https://github.com/PrivateBin/PrivateBin",
    },
    /* actualbudget */
    {
      matchPackagePatterns: ["jlongster\\/actual-server"],
      customChangelogUrl: "https://github.com/actualbudget/actual-server",
      prBodyNotes: "[Release-Notes.md](https://github.com/actualbudget/docs/blob/master/docs/Release-Notes/Release-Notes.md)",
    },
    /* borgmatic */
    {
      matchPackagePatterns: [".*\\/borgmatic"],
      customChangelogUrl: "https://github.com/borgmatic-collective/borgmatic",
    },
    /* nginx */
    {
      matchPackagePatterns: ["nginx"],
      prBodyNotes: "[CHANGES](https://nginx.org/en/CHANGES)",
    },
    /* joplin */
    {
      matchPackagePatterns: ["joplin\\/server"],
      prBodyNotes: "[changelog_server.md](https://github.com/laurent22/joplin/blob/dev/readme/changelog_server.md)",
    },
    /* alertmanager */
    {
      matchPackagePatterns: [".*\\/alertmanager"],
      customChangelogUrl: "https://github.com/prometheus/alertmanager",
    },
    /* radarr */
    {
      matchPackagePatterns: [".*\\/radarr"],
      customChangelogUrl: "https://github.com/Radarr/Radarr",
    },
  ],

  prBodyTemplate: "{{{table}}}{{{notes}}}{{{changelogs}}}{{{controls}}}",
}
