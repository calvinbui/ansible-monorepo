---

groups:
  - name: Alertmanager
    rules:
      -
        alert: AlertmanagerDown
        expr: up{job="alertmanager"} != 1
        for: 5m
        annotations:
          summary: Alertmanager exporter is down
          description: "The alertmanager exporter could not be reached"
      -
        alert: AlertmanagerConfigurationReloadFailure
        expr: alertmanager_config_last_reload_successful != 1
        for: 0m
        annotations:
          summary: Alertmanager configuration reload failure
          description: "Alertmanager configuration reload error"
      -
        alert: AlertmanagerConfigNotSynced
        expr: count(count_values("config_hash", alertmanager_config_hash)) > 1
        for: 0m
        annotations:
          summary: Alertmanager config not synced
          description: "Configurations of Alertmanager cluster instances are out of sync"
      -
        alert: AlertmanagerNotificationFailing
        expr: rate(alertmanager_notifications_failed_total[1m]) > 0
        for: 0m
        annotations:
          summary: Alertmanager notifications failing
          description: "Alertmanager is failing sending notifications"
